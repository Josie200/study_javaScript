react 组件分为类组件和函数组件

他们的区别  
1.类组件需要继承 class，函数组件不需要。  
2.类组件可以访问生命周期方法，函数组件不能。  
3.类组件中可以获取到实例化后的 this，并基于这个 this 做各种各样的事情，而函数组件不可以。  
4.类组件中可以定义并维护 state（状态），而函数组件不可以

**函数组件会捕获 render 内部的状态，这是两类组件最大的不同**

在类组件中 props 本身是不可变的
但 this 却是可变的，this 上的数据是可以被修改的
当使用 setTimeout、setInterval 等方法时，this 会丢失，导致组件无法正常工作

**为什么使用 hook？**  
1.告别难以理解的 Class：this 和生命周期  
2.解决业务逻辑难以拆分的问题：按照逻辑上的关联拆分进不同的函数组件里，Hooks 能够帮助我们实现业务逻辑的聚合避免复杂的组件和冗余的代码  
3.使状态逻辑复用变得更简单：复用状态逻辑,靠的是 HOC (高阶组件)和 Render Props 这些组件设计模式但这些设计模式并非万能,它们在实现逻辑复用的同时,也破坏着组件的结构其中一个最常见的问题就是“嵌套地狱”现象，Hooks 可以视作是 React 为解决状态逻辑复用这个问题所提供的一个原生途径现在我们可以通过自定义 Hook 达到既不破坏组件结构、又能够实现逻辑复用的效果。  
4.函数组件从设计思想上来看更契合 React 的理念

**Hooks 并非万能**
1.Hooks 暂时还不能完全地为函数组件补齐类组件的能力
2.“轻量”几乎是函数组件的基因这可能会使它不能够很好地消化“复杂”
3.Hooks 在使用层面有着严格的规则约束

**Hooks 的使用原则** 1.只在 React 函数中调用 Hooks 2.不要在循环、条件判断或者嵌套函数中调用 Hooks
要确保 Hooks 再每次渲染时都保持同样的执行顺序

React Hooks 的调用链路
useState => 通过 resolveDispatcher 获取 dispatch => 调用 dispatcher.useState => 调用 updateState => 调用 updateReducer => 返回目标数组(如[state,useState])
